---
layout: cheatsheet
tags:
logo: data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCAzMiAzMiI+PGRlZnM+PGNsaXBQYXRoIGlkPSJBIj48cGF0aCBkPSJNNzYgMnY0Nkg1NHYyM0gzNS41OGwtLjIwNiAyYy0xLjE1IDEyLjUzIDEuMDM2IDI0LjA4OCA2LjA2MyAzMy45N2wxLjY4OCAzLjAzYzEgMS44MTcgMi4yIDMuNTIzIDMuNDM4IDUuMTg4czEuNjg2IDIuNTgzIDIuNDcgMy42ODhDNjIuMzIgMTMzLjggODIuMTMgMTQxIDEwNSAxNDFjNTAuNjQ4IDAgOTMuNjMzLTIyLjQzOCAxMTIuNjU2LTcyLjg0NEMyMzEuMTUzIDY5LjU0IDI0NC4xIDY2LjA4IDI1MCA1NC41NjNjLTkuNC01LjQyNC0yMS40NzgtMy42ODUtMjguNDM3LS4xODdMMjQwIDJsLTcyIDQ2aC0yM1YyeiIvPjwvY2xpcFBhdGg+PC9kZWZzPjxnIHRyYW5zZm9ybT0ibWF0cml4KC42Nzk0MjMgMCAwIC42Nzk0MjMgLTIuMDg2MTQ5IDEzLjc4MTgxNykiPjxwYXRoIGQ9Ik0zMC4zMDUtMy41NTNoNC4yMjJWLjc2M2gyLjEzNWE5LjI2IDkuMjYgMCAwIDAgMi45MzQtLjQ5MmMuNDYtLjE1Ni45NzQtLjM3MiAxLjQyNi0uNjQ0LS41OTYtLjc3OC0uOS0xLjc2LTEtMi43My0uMTIyLTEuMzE3LjE0NC0zLjAzMiAxLjAzNi00LjA2M2wuNDQ0LS41MTMuNTMuNDI1YzEuMzMyIDEuMDcgMi40NTIgMi41NjUgMi42NSA0LjI3IDEuNjAzLS40NzIgMy40ODYtLjM2IDQuOS40NTZsLjU4LjMzNS0uMzA1LjU5NmMtMS4xODcgMi4zMy0zLjY4NyAzLjA1My02LjEzIDIuOTI1LTMuNjU2IDkuMTA1LTExLjYxNSAxMy40MTYtMjEuMjY1IDEzLjQxNi00Ljk4NiAwLTkuNTYtMS44NjQtMTIuMTY0LTYuMjg3LS4xNTMtLjI3NS0uMjgzLS41NjItLjQyMi0uODQ0LS44OC0xLjk0Ny0xLjE3My00LjA4LS45NzUtNi4ybC4wNi0uNjM4aDMuNlYtMy41NWg0LjIyMnYtNC4yMjJoOC40NDV2LTQuMjIyaDUuMDY3djguNDQ1IiBmaWxsPSIjMzk0ZDU0Ii8+PGcgdHJhbnNmb3JtPSJtYXRyaXgoLjE4NDY1OSAwIDAgLjE4NDY1OSAzLjA3MDQ3MiAtMTEuOTk3ODY0KSIgY2xpcC1wYXRoPSJ1cmwoI0EpIj48ZyBpZD0iQiI+PGcgaWQ9IkMiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAgLTIyLjg2NikiPjxwYXRoIGQ9Ik0xMjMuODYgMy44aDE5LjgxOHYxOS44MTdIMTIzLjg2eiIgZmlsbD0iIzAwYWNkMyIvPjxwYXRoIGQ9Ik0xMjMuODYgMjYuNjc2aDE5LjgxOHYxOS44MThIMTIzLjg2eiIgZmlsbD0iIzIwYzJlZiIvPjxwYXRoIGlkPSJEIiBkPSJNMTI2LjI5MiAyMS45NzdWNS40Nm0yLjk3MiAxNi41MTZWNS40Nm0zLjAwMiAxNi41MTZWNS40Nm0zLjAwMyAxNi41MTZWNS40Nm0zLjAwMyAxNi41MTZWNS40Nm0yLjk3IDE2LjUxNlY1LjQ2IiBzdHJva2U9IiMzOTRkNTQiIHN0cm9rZS13aWR0aD0iMS41NiIvPjx1c2UgeGxpbms6aHJlZj0iI0QiIHk9IjIyLjg2NiIvPjwvZz48dXNlIHhsaW5rOmhyZWY9IiNDIiB0cmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAtMSAyMi44NjYgNC41NzI2NTEpIi8+PC9nPjx1c2UgeGxpbms6aHJlZj0iI0IiIHg9Ii05MS40NjQiIHk9IjQ1LjczMiIvPjx1c2UgeGxpbms6aHJlZj0iI0IiIHg9Ii00NS43MzIiIHk9IjQ1LjczMiIvPjx1c2UgeGxpbms6aHJlZj0iI0IiIHk9IjQ1LjczMiIvPjxwYXRoIGQ9Ik0yMjEuNTcgNTQuMzhjMS41MzMtMTEuOTE1LTcuMzg0LTIxLjI3NS0xMi45MTQtMjUuNzE4LTYuMzczIDcuMzY4LTcuMzYzIDI2LjY3OCAyLjYzNSAzNC44MDctNS41OCA0Ljk1Ni0xNy4zMzcgOS40NDgtMjkuMzc2IDkuNDQ4SDM0QzMyLjgzIDg1LjQ4NCAzNCAxNDYgMzQgMTQ2aDIxN2wtLjk4Ny05MS40MjRjLTkuNC01LjQyNC0yMS40ODQtMy42OTQtMjguNDQzLS4xOTciIGZpbGw9IiMxN2I1ZWIiLz48cGF0aCBkPSJNMzQgODl2NTdoMjE3Vjg5IiBmaWxsLW9wYWNpdHk9Ii4xNyIvPjxwYXRoIGQ9Ik0xMTEuMjM3IDE0MC45Yy0xMy41NC02LjQyNS0yMC45NzItMTUuMTYtMjUuMTA3LTI0LjY5NEw0NSAxMThsMjEgMjggNDUuMjM3LTUuMSIgZmlsbD0iI2Q0ZWRmMSIvPjxwYXRoIGQ9Ik0yMjIuNSA1My45Mzh2LjAzYy0yMC44NiAyNi45LTUwLjc4MyA1MC4zOC04Mi45MDYgNjIuNzItMjguNjU1IDExLjAwOC01My42MzggMTEuMDYtNzAuODc1IDIuMjItMS44NTYtMS4wNDgtMy42NzYtMi4yMTItNS41LTMuMzEyLTEyLjYzNy04LjgzMi0xOS43NTQtMjMuNDQtMTkuMTU2LTQyLjY4N0gzNFYxNDZoMjE3VjUwaC0yNXoiIGZpbGwtb3BhY2l0eT0iLjA4NSIvPjwvZz48cGF0aCBkPSJNMTEuNDk2IDkuNjEzYzIuNjE2LjE0MyA1LjQwNy4xNyA3Ljg0Mi0uNTk0IiBmaWxsPSJub25lIiBzdHJva2U9IiMzOTRkNTQiIHN0cm9rZS13aWR0aD0iLjYyOCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+PHBhdGggZD0iTTIxLjkzNyA3Ljc1M2ExLjAxIDEuMDEgMCAwIDEtMS4wMDkgMS4wMDkgMS4wMSAxLjAxIDAgMCAxLTEuMDEtMS4wMDkgMS4wMSAxLjAxIDAgMCAxIDEuMDEtMS4wMSAxLjAxIDEuMDEgMCAwIDEgMS4wMDkgMS4wMXoiIGZpbGw9IiNkNGVkZjEiLz48cGF0aCBkPSJNMjEuMiA3LjA4Yy0uMDg4LjA1LS4xNDguMTQ2LS4xNDguMjU2IDAgLjE2My4xMzIuMjk1LjI5NS4yOTUuMTEyIDAgLjItLjA2Mi4yNi0uMTU0YS43My43MyAwIDAgMSAuMDU1LjI3N2MwIC40LS4zMjQuNzIzLS43MjMuNzIzcy0uNzIzLS4zMjQtLjcyMy0uNzIzLjMyNC0uNzIzLjcyMy0uNzIzYS43Mi43MiAwIDAgMSAuMjYyLjA0OXpNMy4wNyA0LjY1aDQ2Ljk2NGMtMS4wMjMtLjI2LTMuMjM1LS42LTIuODctMS45NS0xLjg2IDIuMTUyLTYuMzQ0IDEuNS03LjQ3NS40NDgtMS4yNiAxLjgyOC04LjU5NyAxLjEzMy05LjEwOC0uMy0xLjU4IDEuODU0LTYuNDc1IDEuODU0LTguMDU1IDAtLjUxMiAxLjQyNC03Ljg0OCAyLjEyLTkuMS4zQzEyLjI4NCA0LjIgNy44IDQuODUzIDUuOTQgMi43Yy4zNjUgMS4zNC0xLjg0OCAxLjctMi44NyAxLjk1IiBmaWxsPSIjMzk0ZDU0Ii8+PC9nPjwvc3ZnPg==
section:
  - name: clean up
    commands:
      list volumes: docker volume ls --filter driver=local --filter name="dev_" --format "{{.Name}}"
      show disk usage / volume sizes: docker system df [--verbose]
      prune: docker system prune [--volumes]
      show stopped containers: docker container ls -f status=exited -a
  - name: stats
    commands:
      sort by memory usage: docker stats --no-stream --format "table {{.Name}}\t{{.Container}}\t{{.CPUPerc}}\t{{.MemUsage}}" | LC_ALL=en_US.utf8 sort -k 4 -h
      show restarts in the last hour: docker events --filter event=restart --since=60m
  - name: ps
    commands:
      Find testcontainers: docker ps --filter "label=org.testcontainers=true"
  - name: inspect
    commands:
      Health: docker inspect --format='{{json .State.Health}}' container_name
  - name: compose
    commands:
      run command inside container: docker-compose exec container bash
      delete everything (including volumes): docker-compose down --volumes
  - name: swarm
    commands:
      list nodes: docker node ls
      list stacks: docker stack ls
      list services: docker service ls
      show errors during deployment (image not found etc.): docker service ps --no-trunc <service_name>
      drain node: docker node update --availability drain <id>
      activate node: docker node update --availability active <id>
      logs: docker service logs --since=30m -f <service_name>
---
