---
layout: cheatsheet
tags: record-screen screencast mp4 av1 opus webm video pacmd
logo: data:image/svg+xml;base64,77u/PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c29kaXBvZGk9Imh0dHA6Ly9zb2RpcG9kaS5zb3VyY2Vmb3JnZS5uZXQvRFREL3NvZGlwb2RpLTAuZHRkIgogICB4bWxuczppbmtzY2FwZT0iaHR0cDovL3d3dy5pbmtzY2FwZS5vcmcvbmFtZXNwYWNlcy9pbmtzY2FwZSIKICAgd2lkdGg9IjY0IgogICBoZWlnaHQ9IjY0IgogICB2aWV3Qm94PSIwIDAgNjMuOTk5OTk5IDY0LjAwMDAwMSIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0ic3ZnMiIKICAgaW5rc2NhcGU6dmVyc2lvbj0iMC40OC40IHI5OTM5IgogICBzb2RpcG9kaTpkb2NuYW1lPSJGRm1wZWdfTG9nb19uZXcuc3ZnIj4KICA8bWV0YWRhdGEKICAgICBpZD0ibWV0YWRhdGE2NyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxIgogICAgIG9iamVjdHRvbGVyYW5jZT0iMTAiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAiCiAgICAgZ3VpZGV0b2xlcmFuY2U9IjEwIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxOTIwIgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9IjEwMTciCiAgICAgaWQ9Im5hbWVkdmlldzY1IgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBmaXQtbWFyZ2luLXRvcD0iMCIKICAgICBmaXQtbWFyZ2luLWxlZnQ9IjAiCiAgICAgZml0LW1hcmdpbi1yaWdodD0iMCIKICAgICBmaXQtbWFyZ2luLWJvdHRvbT0iMCIKICAgICBpbmtzY2FwZTp6b29tPSI0LjM0NzY3NzkiCiAgICAgaW5rc2NhcGU6Y3g9IjI0LjAzNDEzOSIKICAgICBpbmtzY2FwZTpjeT0iNDQuMTIzMTYyIgogICAgIGlua3NjYXBlOndpbmRvdy14PSItOCIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iLTgiCiAgICAgaW5rc2NhcGU6d2luZG93LW1heGltaXplZD0iMSIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJzdmcyIiAvPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxyYWRpYWxHcmFkaWVudAogICAgICAgaWQ9ImEiCiAgICAgICBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIKICAgICAgIGN5PSI0NDIuNzIzMTEiCiAgICAgICBjeD0iLTEyMi4zOTM2IgogICAgICAgZ3JhZGllbnRUcmFuc2Zvcm09Im1hdHJpeCgxLDAsMCwtMSwxMzQuNDQ2Myw0NTMuNzMzNCkiCiAgICAgICByPSIyOS41ODA0Ij4KICAgICAgPHN0b3AKICAgICAgICAgc3RvcC1jb2xvcj0iI2ZmZiIKICAgICAgICAgb2Zmc2V0PSIwIgogICAgICAgICBpZD0ic3RvcDciIC8+CiAgICAgIDxzdG9wCiAgICAgICAgIHN0b3AtY29sb3I9IiMwMDc4MDgiCiAgICAgICAgIG9mZnNldD0iMSIKICAgICAgICAgaWQ9InN0b3A5IiAvPgogICAgPC9yYWRpYWxHcmFkaWVudD4KICA8L2RlZnM+CiAgPGcKICAgICBpZD0iZzExIgogICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMzI0NDk5NSwyLjc5ODUwMDUpIj4KICAgIDxwb2x5Z29uCiAgICAgICBwb2ludHM9IjUuNDAyLDEzLjU0MSAwLjUxMSwxMi4zNjQgMC41MTEsNS4wNzggNS40MDIsNi43NjMgIgogICAgICAgaWQ9InBvbHlnb24xMyIKICAgICAgIHN0eWxlPSJmaWxsOiMwYjQ4MTkiIC8+CiAgICA8cG9seWdvbgogICAgICAgcG9pbnRzPSI5LjEzLDQxLjM5MyA0LjQ1NSw0Mi4zMTcgNC40NTUsMTUuMjI2IDkuMTMsMTYuMjE1ICIKICAgICAgIGlkPSJwb2x5Z29uMTUiCiAgICAgICBzdHlsZT0iZmlsbDojMGI0ODE5IiAvPgogICAgPHBvbHlnb24KICAgICAgIHBvaW50cz0iNjAuNjYyLDU1Ljk4MSAzNC4wMTIsNTMuOTE3IDQ3LjU5Nyw0MC43MzggNDcuNTk3LDM0LjI0MyAyOC4xNzUsNTMuNDY1IDQuOTE5LDUxLjY2NyA0Mi4yMjIsMTEuNTUgMzYuMDgzLDExLjg4MiA5LjEzLDQxLjM5MyA5LjEzLDE2LjIxNSAxMS42ODMsMTMuMjAxIDUuNDAyLDEzLjU0MSA1LjQwMiw2Ljc2MyAyNy4zMjEsNS4wNjYgMTUuMzA2LDE4Ljg0NiAxNS4zMDYsMjQuNzEgMzMuMTI2LDQuNjE3IDYxLjM1MSwyLjQzMiAxOS44MzQsNDUuNzA2IDI1LjM2MSw0NS45OTcgNTUuNTE2LDE1LjE1NCA1NS41MTYsNDQuMzA1IDUyLjE2Niw0Ny40NTQgNjAuNjYyLDQ3LjkxMyAiCiAgICAgICBpZD0icG9seWdvbjE3IgogICAgICAgc3R5bGU9ImZpbGw6IzEwNWM4MCIgLz4KICAgIDxwb2x5Z29uCiAgICAgICBwb2ludHM9IjkuMTMsMTYuMjE1IDQuNDU1LDE1LjIyNiA3LjE1OSwxMS45NzEgMTEuNjgzLDEzLjIwMSAiCiAgICAgICBpZD0icG9seWdvbjE5IgogICAgICAgc3R5bGU9ImZpbGw6IzBiNDgxOSIgLz4KICAgIDxwb2x5Z29uCiAgICAgICBwb2ludHM9IjExLjAwNCwyNC4zNTggMTEuMDA0LDE4LjAzOSAxNS4zMDYsMTguODQ2IDE1LjMwNiwyNC43MSAiCiAgICAgICBpZD0icG9seWdvbjIxIgogICAgICAgc3R5bGU9ImZpbGw6IzA4NDAxMCIgLz4KICAgIDxwb2x5Z29uCiAgICAgICBwb2ludHM9IjIxLjcxNCw0Ny4zNDYgMTUuODIsNDcuMDA2IDE5LjgzNCw0NS43MDYgMjUuMzYxLDQ1Ljk5NyAiCiAgICAgICBpZD0icG9seWdvbjIzIgogICAgICAgc3R5bGU9ImZpbGw6IzBjNTQxZSIgLz4KICAgIDxwb2x5Z29uCiAgICAgICBwb2ludHM9IjExLjAwNCwxOC4wMzkgMjMuODA4LDMuMTA2IDI3LjMyMSw1LjA2NiAxNS4zMDYsMTguODQ2ICIKICAgICAgIGlkPSJwb2x5Z29uMjUiCiAgICAgICBzdHlsZT0iZmlsbDojMWE1YzM0IiAvPgogICAgPHBvbHlnb24KICAgICAgIHBvaW50cz0iMTUuMzA2LDI0LjcxIDExLjAwNCwyNC4zNTggMzAuMDIyLDIuNTggMzMuMTI2LDQuNjE3ICIKICAgICAgIGlkPSJwb2x5Z29uMjciCiAgICAgICBzdHlsZT0iZmlsbDojMGI0ODE5IiAvPgogICAgPHBvbHlnb24KICAgICAgIHBvaW50cz0iNC40NTUsNDIuMzE3IDMzLjE5NSwxMC40MzIgMzYuMDgzLDExLjg4MiA5LjEzLDQxLjM5MyAiCiAgICAgICBpZD0icG9seWdvbjI5IgogICAgICAgc3R5bGU9ImZpbGw6IzFhNWMzNCIgLz4KICAgIDxwb2x5Z29uCiAgICAgICBwb2ludHM9IjQuOTE5LDUxLjY2NyAwLDUzLjM0NCAzOS43OTgsMTAuMDQyIDQyLjIyMiwxMS41NSAiCiAgICAgICBpZD0icG9seWdvbjMxIgogICAgICAgc3R5bGU9ImZpbGw6IzBiNDgxOSIgLz4KICAgIDxwb2x5Z29uCiAgICAgICBwb2ludHM9IjI0LjcyMSw1NS40MzcgNDUuNTk3LDM0LjY3NyA0Ny41OTcsMzQuMjQzIDI4LjE3NSw1My40NjUgIgogICAgICAgaWQ9InBvbHlnb24zMyIKICAgICAgIHN0eWxlPSJmaWxsOiMxYTVjMzQiIC8+CiAgICA8cG9seWdvbgogICAgICAgcG9pbnRzPSI0Ny41OTcsNDAuNzM4IDQ1LjU5Nyw0MS43MzcgNDUuNTk3LDM0LjY3NyA0Ny41OTcsMzQuMjQzICIKICAgICAgIGlkPSJwb2x5Z29uMzUiCiAgICAgICBzdHlsZT0iZmlsbDojMGI0ODE5IiAvPgogICAgPHBvbHlnb24KICAgICAgIHBvaW50cz0iMzQuMDEyLDUzLjkxNyAzMC45NzMsNTUuOTY1IDQ1LjU5Nyw0MS43MzcgNDcuNTk3LDQwLjczOCAiCiAgICAgICBpZD0icG9seWdvbjM3IgogICAgICAgc3R5bGU9ImZpbGw6IzBiNDgxOSIgLz4KICAgIDxwb2x5Z29uCiAgICAgICBwb2ludHM9IjU1LjUxNiw0NC4zMDUgNTQuMTY4LDQ1LjY0OCA1MC41MzgsNDkuMDU5IDUyLjE2Niw0Ny40NTQgIgogICAgICAgaWQ9InBvbHlnb24zOSIKICAgICAgIHN0eWxlPSJmaWxsOiMxMzgwMmQiIC8+CiAgICA8cG9seWdvbgogICAgICAgcG9pbnRzPSIyNS4zNjEsNDUuOTk3IDIxLjcxNCw0Ny4zNDYgNTQuMTY4LDEzLjkgNTUuNTE2LDE1LjE1NCAiCiAgICAgICBpZD0icG9seWdvbjQxIgogICAgICAgc3R5bGU9ImZpbGw6IzBiNDgxOSIgLz4KICAgIDxwb2x5Z29uCiAgICAgICBwb2ludHM9IjU0LjE2OCw0NS42NDggNTQuMTY4LDEzLjkgNTUuNTE2LDE1LjE1NCA1NS41MTYsNDQuMzA1ICIKICAgICAgIGlkPSJwb2x5Z29uNDMiCiAgICAgICBzdHlsZT0iZmlsbDojMDg0MDEwIiAvPgogICAgPHBvbHlnb24KICAgICAgIHBvaW50cz0iNTkuNzU5LDU4LjQwMyA1OS43NTksNDkuNjA0IDYwLjY2Miw0Ny45MTMgNjAuNjYyLDU1Ljk4MSAiCiAgICAgICBpZD0icG9seWdvbjQ1IgogICAgICAgc3R5bGU9ImZpbGw6IzA4NDAxMCIgLz4KICAgIDxwb2x5Z29uCiAgICAgICBwb2ludHM9IjE1LjgyLDQ3LjAwNiA2MC41MDcsMCA2MS4zNTEsMi40MzIgMTkuODM0LDQ1LjcwNiAiCiAgICAgICBpZD0icG9seWdvbjQ3IgogICAgICAgc3R5bGU9ImZpbGw6IzFhNWMzNCIgLz4KICAgIDxwb2x5Z29uCiAgICAgICBwb2ludHM9IjU5Ljc1OSw1OC40MDMgMzAuOTczLDU1Ljk2NSA0NS41OTcsNDEuNzM3IDQ1LjU5NywzNC42NzcgMjQuNzIxLDU1LjQzNyAwLDUzLjM0NCAzOS43OTgsMTAuMDQyIDMzLjE5NSwxMC40MzIgNC40NTUsNDIuMzE3IDQuNDU1LDE1LjIyNiA3LjE1OSwxMS45NzEgMC41MTEsMTIuMzY0IDAuNTExLDUuMDc4IDIzLjgwOCwzLjEwNiAxMS4wMDQsMTguMDM5IDExLjAwNCwyNC4zNTggMzAuMDIyLDIuNTggNjAuNTA3LDAgMTUuODIsNDcuMDA2IDIxLjcxNCw0Ny4zNDYgNTQuMTY4LDEzLjkgNTQuMTY4LDQ1LjY0OCA1MC41MzgsNDkuMDU5IDU5Ljc1OSw0OS42MDQgIgogICAgICAgaWQ9InBvbHlnb240OSIKICAgICAgIHN0eWxlPSJmaWxsOnVybCgjYSkiIC8+CiAgPC9nPgo8L3N2Zz4K
section:
  - name: Record screencasts (lossless)
    commands:
      4K: ffmpeg -video_size 3840x2160 -framerate 30 -f x11grab -i :0.0 -c:v libx264rgb -qp 0 -preset ultrafast capture.mp4
      Downscaled to 1920x1080: ffmpeg -video_size 3840x2160 -framerate 30 -f x11grab -i :0.0 -vf scale=1920:1080 -c:v libx264rgb -qp 0 -preset ultrafast capture.mp4
      With audio you hear, but without microphone (use 'pacmd list-sources'): ffmpeg -f pulse -i alsa_output.pci-0000_00_1f.3.analog-stereo.monitor -video_size 3840x2160 -framerate 30 -f x11grab -i :0.0 -c:v libx264rgb -qp 0 -preset ultrafast capture.mp4
      With both, speakers and microphone audio: ffmpeg -f pulse -ac 2 -i alsa_output.pci-0000_00_1f.3.analog-stereo.monitor -f pulse -ac 1 -i alsa_input.pci-0000_00_1f.3.analog-stereo -filter_complex amix=inputs=2 -video_size 3840x2160 -framerate 30 -f x11grab -i :0.0 -c:v libx264rgb -qp 0 -preset ultrafast capture.mp4
  - name: Convert
    commands:
      For WhatsApp: ffmpeg -i input.mp4 -c:v libx264 -profile:v baseline -level 3.0 -pix_fmt yuv420p -preset slow -crf 22 output.mp4
      AV1: ffmpeg -i input.mp4 -c:v libaom-av1 -c:a libopus -b:a 96k output.webm
  - name: Cut video
    commands:
      Start timestamp and duration: ffmpeg -ss 00:00:30.0 -i input.mp4 -c copy -t 00:00:44.0 output.mp4
  - name: Resize/scale video
    commands:
      Resize to 1280 pixels width: ffmpeg -i input.mp4 -vf scale=1280:-4 output.mp4
      Batch resize whole folder: find . -type f -iname '*.mp4' -printf '%P\n' | xargs --max-args=1 sh -c 'ffmpeg -i "${0}" -vf scale=1280:-4 "${0%.*}_.mp4"'
  - name: Increase volume
    commands:
      Detect max_volume: ffmpeg -i input.mp4 -af "volumedetect" -vn -sn -dn -f null /dev/null
      Increase volume: ffmpeg -i input.mp4 -af "volume=5dB" -c:v copy -c:a aac -b:a 96k output.mp4
  - name: Reduce audio noise
    commands:
      Reduce noise: ffmpeg -i input.mp4 -af "highpass=f=200, lowpass=f=2500, volume=45dB, afftdn=nf=-25" -c:v copy -c:a aac -b:a 96k output.mp4
  - name: Capture webcam frame
    commands:
      Reduce noise: ffmpeg -f video4linux2 -s 640x480 -i /dev/video0 -ss 0:0:2 -frames 1 /tmp/out.jpg
  - name: Audio
    commands:
      Extract audio stream (use ffprobe before): ffmpeg -i input.mp4 -vn -acodec copy output.aac
      Drop audio stream: ffmpeg -i input.mp4 -an output.mp4
  - name: Speed
    commands:
      Speed up video: ffmpeg -i input.mp4 -filter:v "setpts=PTS/20" output.mp4
  - name: Subtitles
    commands:
      Embed subtitles: ffmpeg -i input.mp4 -i english.vtt -c copy -c:s mov_text -metadata:s:s:0 language=eng output.mp4
      Embed subtitles (multiple languages): ffmpeg -i input.mp4 -i english.vtt -i german.vtt -map 0 -map 1:s -map 2:s -c copy -c:s mov_text -c:s mov_text -metadata:s:s:0 language=eng -metadata:s:s:1 language=ger output.mp4
---
